{"version":3,"sources":["../src/utils.js"],"names":["getUTCDate","date","Date","getTime","getTimezoneOffset","getParametersValue","parameters","name","defaultValue","Object","bufferToHexCodes","inputBuffer","inputOffset","inputLength","byteLength","insertSpace","result","Uint8Array","item","str","toString","toUpperCase","length","trim","checkBufferParams","baseBlock","ArrayBuffer","error","utilFromBase","inputBase","i","Math","pow","utilToBase","value","base","reserved","internalReserved","internalValue","biggest","retBuf","retView","j","basis","floor","utilConcatBuf","buffers","outputLength","prevLength","buffer","set","utilConcatView","views","view","utilDecodeTC","buf","valueHex","condition1","condition2","warnings","push","bigIntBuffer","bigIntView","bigInt","smallIntBuffer","smallIntView","smallInt","utilEncodeTC","modValue","tempBuf","slice","tempView","k","isEqualBuffer","inputBuffer1","inputBuffer2","view1","view2","padNumber","inputNumber","fullLength","dif","padding","Array","paddingString","join","concat","base64Template","base64UrlTemplate","toBase64","input","useUrlTemplate","skipPadding","skipLeadingZeros","flag1","flag2","output","template","nonZeroPosition","charCodeAt","chr1","chr2","chr3","enc1","enc2","enc3","enc4","charAt","fromBase64","cutTailZeros","indexof","toSearch","test","incoming","String","fromCharCode","nonZeroStart","arrayBufferToString","resultString","element","stringToArrayBuffer","stringLength","resultBuffer","resultView","log2","log","nearestPowerOf2","round","clearProps","object","propsArray","prop"],"mappings":"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","sourcesContent":["//**************************************************************************************\r\n/**\r\n * Making UTC date from local date\r\n * @param {Date} date Date to convert from\r\n * @returns {Date}\r\n */\r\nexport function getUTCDate(date)\r\n{\r\n\t// noinspection NestedFunctionCallJS, MagicNumberJS\r\n\treturn new Date(date.getTime() + (date.getTimezoneOffset() * 60000));\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Get value for input parameters, or set a default value\r\n * @param {Object} parameters\r\n * @param {string} name\r\n * @param defaultValue\r\n */\r\nexport function getParametersValue(parameters, name, defaultValue)\r\n{\r\n\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS\r\n\tif((parameters instanceof Object) === false)\r\n\t\treturn defaultValue;\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tif(name in parameters)\r\n\t\treturn parameters[name];\r\n\t\r\n\treturn defaultValue;\r\n}\r\n//**************************************************************************************\r\n/**\r\n * Converts \"ArrayBuffer\" into a hexdecimal string\r\n * @param {ArrayBuffer} inputBuffer\r\n * @param {number} [inputOffset=0]\r\n * @param {number} [inputLength=inputBuffer.byteLength]\r\n * @param {boolean} [insertSpace=false]\r\n * @returns {string}\r\n */\r\nexport function bufferToHexCodes(inputBuffer, inputOffset = 0, inputLength = (inputBuffer.byteLength - inputOffset), insertSpace = false)\r\n{\r\n\tlet result = \"\";\r\n\t\r\n\tfor(const item of (new Uint8Array(inputBuffer, inputOffset, inputLength)))\r\n\t{\r\n\t\t// noinspection ChainedFunctionCallJS\r\n\t\tconst str = item.toString(16).toUpperCase();\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS\r\n\t\tif(str.length === 1)\r\n\t\t\tresult += \"0\";\r\n\t\t\r\n\t\tresult += str;\r\n\t\t\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(insertSpace)\r\n\t\t\tresult += \" \";\r\n\t}\r\n\t\r\n\treturn result.trim();\r\n}\r\n//**************************************************************************************\r\n// noinspection JSValidateJSDoc, FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Check input \"ArrayBuffer\" for common functions\r\n * @param {LocalBaseBlock} baseBlock\r\n * @param {ArrayBuffer} inputBuffer\r\n * @param {number} inputOffset\r\n * @param {number} inputLength\r\n * @returns {boolean}\r\n */\r\nexport function checkBufferParams(baseBlock, inputBuffer, inputOffset, inputLength)\r\n{\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif((inputBuffer instanceof ArrayBuffer) === false)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"Wrong parameter: inputBuffer must be \\\"ArrayBuffer\\\"\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif(inputBuffer.byteLength === 0)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"Wrong parameter: inputBuffer has zero length\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif(inputOffset < 0)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"Wrong parameter: inputOffset less than zero\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif(inputLength < 0)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"Wrong parameter: inputLength less than zero\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif((inputBuffer.byteLength - inputOffset - inputLength) < 0)\r\n\t{\r\n\t\t// noinspection JSUndefinedPropertyAssignment\r\n\t\tbaseBlock.error = \"End of input reached before message was fully decoded (inconsistent offset and length values)\";\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\treturn true;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Convert number from 2^base to 2^10\r\n * @param {Uint8Array} inputBuffer\r\n * @param {number} inputBase\r\n * @returns {number}\r\n */\r\nexport function utilFromBase(inputBuffer, inputBase)\r\n{\r\n\tlet result = 0;\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS\r\n\tif(inputBuffer.length === 1)\r\n\t\treturn inputBuffer[0];\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS\r\n\tfor(let i = (inputBuffer.length - 1); i >= 0; i--)\r\n\t\tresult += inputBuffer[(inputBuffer.length - 1) - i] * Math.pow(2, inputBase * i);\r\n\t\r\n\treturn result;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS, FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Convert number from 2^10 to 2^base\r\n * @param {!number} value The number to convert\r\n * @param {!number} base The base for 2^base\r\n * @param {number} [reserved=0] Pre-defined number of bytes in output array (-1 = limited by function itself)\r\n * @returns {ArrayBuffer}\r\n */\r\nexport function utilToBase(value, base, reserved = (-1))\r\n{\r\n\tconst internalReserved = reserved;\r\n\tlet internalValue = value;\r\n\t\r\n\tlet result = 0;\r\n\tlet biggest = Math.pow(2, base);\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tfor(let i = 1; i < 8; i++)\r\n\t{\r\n\t\tif(value < biggest)\r\n\t\t{\r\n\t\t\tlet retBuf;\r\n\t\t\t\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(internalReserved < 0)\r\n\t\t\t{\r\n\t\t\t\tretBuf = new ArrayBuffer(i);\r\n\t\t\t\tresult = i;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// noinspection NonBlockStatementBodyJS\r\n\t\t\t\tif(internalReserved < i)\r\n\t\t\t\t\treturn (new ArrayBuffer(0));\r\n\t\t\t\t\r\n\t\t\t\tretBuf = new ArrayBuffer(internalReserved);\r\n\t\t\t\t\r\n\t\t\t\tresult = internalReserved;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst retView = new Uint8Array(retBuf);\r\n\t\t\t\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tfor(let j = (i - 1); j >= 0; j--)\r\n\t\t\t{\r\n\t\t\t\tconst basis = Math.pow(2, j * base);\r\n\t\t\t\t\r\n\t\t\t\tretView[result - j - 1] = Math.floor(internalValue / basis);\r\n\t\t\t\tinternalValue -= (retView[result - j - 1]) * basis;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn retBuf;\r\n\t\t}\r\n\t\t\r\n\t\tbiggest *= Math.pow(2, base);\r\n\t}\r\n\t\r\n\treturn new ArrayBuffer(0);\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS\r\n/**\r\n * Concatenate two ArrayBuffers\r\n * @param {...ArrayBuffer} buffers Set of ArrayBuffer\r\n */\r\nexport function utilConcatBuf(...buffers)\r\n{\r\n\t//region Initial variables\r\n\tlet outputLength = 0;\r\n\tlet prevLength = 0;\r\n\t//endregion\r\n\t\r\n\t//region Calculate output length\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(const buffer of buffers)\r\n\t\toutputLength += buffer.byteLength;\r\n\t//endregion\r\n\t\r\n\tconst retBuf = new ArrayBuffer(outputLength);\r\n\tconst retView = new Uint8Array(retBuf);\r\n\t\r\n\tfor(const buffer of buffers)\r\n\t{\r\n\t\t// noinspection NestedFunctionCallJS\r\n\t\tretView.set(new Uint8Array(buffer), prevLength);\r\n\t\tprevLength += buffer.byteLength;\r\n\t}\r\n\t\r\n\treturn retBuf;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS\r\n/**\r\n * Concatenate two Uint8Array\r\n * @param {...Uint8Array} views Set of Uint8Array\r\n */\r\nexport function utilConcatView(...views)\r\n{\r\n\t//region Initial variables\r\n\tlet outputLength = 0;\r\n\tlet prevLength = 0;\r\n\t//endregion\r\n\t\r\n\t//region Calculate output length\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(const view of views)\r\n\t\toutputLength += view.length;\r\n\t//endregion\r\n\t\r\n\tconst retBuf = new ArrayBuffer(outputLength);\r\n\tconst retView = new Uint8Array(retBuf);\r\n\t\r\n\tfor(const view of views)\r\n\t{\r\n\t\tretView.set(view, prevLength);\r\n\t\tprevLength += view.length;\r\n\t}\r\n\t\r\n\treturn retView;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS\r\n/**\r\n * Decoding of \"two complement\" values\r\n * The function must be called in scope of instance of \"hexBlock\" class (\"valueHex\" and \"warnings\" properties must be present)\r\n * @returns {number}\r\n */\r\nexport function utilDecodeTC()\r\n{\r\n\tconst buf = new Uint8Array(this.valueHex);\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tif(this.valueHex.byteLength >= 2)\r\n\t{\r\n\t\t//noinspection JSBitwiseOperatorUsage, ConstantOnRightSideOfComparisonJS, LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst condition1 = (buf[0] === 0xFF) && (buf[1] & 0x80);\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst condition2 = (buf[0] === 0x00) && ((buf[1] & 0x80) === 0x00);\r\n\t\t\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(condition1 || condition2)\r\n\t\t\tthis.warnings.push(\"Needlessly long format\");\r\n\t}\r\n\t\r\n\t//region Create big part of the integer\r\n\tconst bigIntBuffer = new ArrayBuffer(this.valueHex.byteLength);\r\n\tconst bigIntView = new Uint8Array(bigIntBuffer);\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(let i = 0; i < this.valueHex.byteLength; i++)\r\n\t\tbigIntView[i] = 0;\r\n\t\r\n\t// noinspection MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\tbigIntView[0] = (buf[0] & 0x80); // mask only the biggest bit\r\n\t\r\n\tconst bigInt = utilFromBase(bigIntView, 8);\r\n\t//endregion\r\n\t\r\n\t//region Create small part of the integer\r\n\tconst smallIntBuffer = new ArrayBuffer(this.valueHex.byteLength);\r\n\tconst smallIntView = new Uint8Array(smallIntBuffer);\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(let j = 0; j < this.valueHex.byteLength; j++)\r\n\t\tsmallIntView[j] = buf[j];\r\n\t\r\n\t// noinspection MagicNumberJS\r\n\tsmallIntView[0] &= 0x7F; // mask biggest bit\r\n\t\r\n\tconst smallInt = utilFromBase(smallIntView, 8);\r\n\t//endregion\r\n\t\r\n\treturn (smallInt - bigInt);\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS, FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Encode integer value to \"two complement\" format\r\n * @param {number} value Value to encode\r\n * @returns {ArrayBuffer}\r\n */\r\nexport function utilEncodeTC(value)\r\n{\r\n\t// noinspection ConstantOnRightSideOfComparisonJS, ConditionalExpressionJS\r\n\tconst modValue = (value < 0) ? (value * (-1)) : value;\r\n\tlet bigInt = 128;\r\n\t\r\n\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\tfor(let i = 1; i < 8; i++)\r\n\t{\r\n\t\tif(modValue <= bigInt)\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(value < 0)\r\n\t\t\t{\r\n\t\t\t\tconst smallInt = bigInt - modValue;\r\n\t\t\t\t\r\n\t\t\t\tconst retBuf = utilToBase(smallInt, 8, i);\r\n\t\t\t\tconst retView = new Uint8Array(retBuf);\r\n\t\t\t\t\r\n\t\t\t\t// noinspection MagicNumberJS\r\n\t\t\t\tretView[0] |= 0x80;\r\n\t\t\t\t\r\n\t\t\t\treturn retBuf;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet retBuf = utilToBase(modValue, 8, i);\r\n\t\t\tlet retView = new Uint8Array(retBuf);\r\n\t\t\t\r\n\t\t\t//noinspection JSBitwiseOperatorUsage, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\t\tif(retView[0] & 0x80)\r\n\t\t\t{\r\n\t\t\t\t//noinspection JSCheckFunctionSignatures\r\n\t\t\t\tconst tempBuf = retBuf.slice(0);\r\n\t\t\t\tconst tempView = new Uint8Array(tempBuf);\r\n\t\t\t\t\r\n\t\t\t\tretBuf = new ArrayBuffer(retBuf.byteLength + 1);\r\n\t\t\t\t// noinspection ReuseOfLocalVariableJS\r\n\t\t\t\tretView = new Uint8Array(retBuf);\r\n\t\t\t\t\r\n\t\t\t\t// noinspection NonBlockStatementBodyJS\r\n\t\t\t\tfor(let k = 0; k < tempBuf.byteLength; k++)\r\n\t\t\t\t\tretView[k + 1] = tempView[k];\r\n\t\t\t\t\r\n\t\t\t\t// noinspection MagicNumberJS\r\n\t\t\t\tretView[0] = 0x00;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn retBuf;\r\n\t\t}\r\n\t\t\r\n\t\tbigInt *= Math.pow(2, 8);\r\n\t}\r\n\t\r\n\treturn (new ArrayBuffer(0));\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleReturnPointsJS, ParameterNamingConventionJS\r\n/**\r\n * Compare two array buffers\r\n * @param {!ArrayBuffer} inputBuffer1\r\n * @param {!ArrayBuffer} inputBuffer2\r\n * @returns {boolean}\r\n */\r\nexport function isEqualBuffer(inputBuffer1, inputBuffer2)\r\n{\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tif(inputBuffer1.byteLength !== inputBuffer2.byteLength)\r\n\t\treturn false;\r\n\t\r\n\t// noinspection LocalVariableNamingConventionJS\r\n\tconst view1 = new Uint8Array(inputBuffer1);\r\n\t// noinspection LocalVariableNamingConventionJS\r\n\tconst view2 = new Uint8Array(inputBuffer2);\r\n\t\r\n\tfor(let i = 0; i < view1.length; i++)\r\n\t{\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(view1[i] !== view2[i])\r\n\t\t\treturn false;\r\n\t}\r\n\t\r\n\treturn true;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleReturnPointsJS\r\n/**\r\n * Pad input number with leade \"0\" if needed\r\n * @returns {string}\r\n * @param {number} inputNumber\r\n * @param {number} fullLength\r\n */\r\nexport function padNumber(inputNumber, fullLength)\r\n{\r\n\tconst str = inputNumber.toString(10);\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tif(fullLength < str.length)\r\n\t\treturn \"\";\r\n\t\r\n\tconst dif = fullLength - str.length;\r\n\t\r\n\tconst padding = new Array(dif);\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(let i = 0; i < dif; i++)\r\n\t\tpadding[i] = \"0\";\r\n\t\r\n\tconst paddingString = padding.join(\"\");\r\n\t\r\n\treturn paddingString.concat(str);\r\n}\r\n//**************************************************************************************\r\nconst base64Template = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\nconst base64UrlTemplate = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=\";\r\n//**************************************************************************************\r\n// noinspection FunctionWithMultipleLoopsJS, OverlyComplexFunctionJS, FunctionTooLongJS, FunctionNamingConventionJS\r\n/**\r\n * Encode string into BASE64 (or \"base64url\")\r\n * @param {string} input\r\n * @param {boolean} useUrlTemplate If \"true\" then output would be encoded using \"base64url\"\r\n * @param {boolean} skipPadding Skip BASE-64 padding or not\r\n * @param {boolean} skipLeadingZeros Skip leading zeros in input data or not\r\n * @returns {string}\r\n */\r\nexport function toBase64(input, useUrlTemplate = false, skipPadding = false, skipLeadingZeros = false)\r\n{\r\n\tlet i = 0;\r\n\t\r\n\t// noinspection LocalVariableNamingConventionJS\r\n\tlet flag1 = 0;\r\n\t// noinspection LocalVariableNamingConventionJS\r\n\tlet flag2 = 0;\r\n\t\r\n\tlet output = \"\";\r\n\t\r\n\t// noinspection ConditionalExpressionJS\r\n\tconst template = (useUrlTemplate) ? base64UrlTemplate : base64Template;\r\n\t\r\n\tif(skipLeadingZeros)\r\n\t{\r\n\t\tlet nonZeroPosition = 0;\r\n\t\t\r\n\t\tfor(let i = 0; i < input.length; i++)\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(input.charCodeAt(i) !== 0)\r\n\t\t\t{\r\n\t\t\t\tnonZeroPosition = i;\r\n\t\t\t\t// noinspection BreakStatementJS\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// noinspection AssignmentToFunctionParameterJS\r\n\t\tinput = input.slice(nonZeroPosition);\r\n\t}\r\n\t\r\n\twhile(i < input.length)\r\n\t{\r\n\t\t// noinspection LocalVariableNamingConventionJS, IncrementDecrementResultUsedJS\r\n\t\tconst chr1 = input.charCodeAt(i++);\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(i >= input.length)\r\n\t\t\tflag1 = 1;\r\n\t\t// noinspection LocalVariableNamingConventionJS, IncrementDecrementResultUsedJS\r\n\t\tconst chr2 = input.charCodeAt(i++);\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(i >= input.length)\r\n\t\t\tflag2 = 1;\r\n\t\t// noinspection LocalVariableNamingConventionJS, IncrementDecrementResultUsedJS\r\n\t\tconst chr3 = input.charCodeAt(i++);\r\n\t\t\r\n\t\t// noinspection LocalVariableNamingConventionJS\r\n\t\tconst enc1 = chr1 >> 2;\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst enc2 = ((chr1 & 0x03) << 4) | (chr2 >> 4);\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tlet enc3 = ((chr2 & 0x0F) << 2) | (chr3 >> 6);\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tlet enc4 = chr3 & 0x3F;\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\tif(flag1 === 1)\r\n\t\t{\r\n\t\t\t// noinspection NestedAssignmentJS, AssignmentResultUsedJS, MagicNumberJS\r\n\t\t\tenc3 = enc4 = 64;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(flag2 === 1)\r\n\t\t\t{\r\n\t\t\t\t// noinspection MagicNumberJS\r\n\t\t\t\tenc4 = 64;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// noinspection NonBlockStatementBodyJS\r\n\t\tif(skipPadding)\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS, MagicNumberJS\r\n\t\t\tif(enc3 === 64)\r\n\t\t\t\toutput += `${template.charAt(enc1)}${template.charAt(enc2)}`;\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS, MagicNumberJS\r\n\t\t\t\tif(enc4 === 64)\r\n\t\t\t\t\toutput += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}`;\r\n\t\t\t\telse\r\n\t\t\t\t\toutput += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}${template.charAt(enc4)}`;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t\toutput += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}${template.charAt(enc4)}`;\r\n\t}\r\n\t\r\n\treturn output;\r\n}\r\n//**************************************************************************************\r\n// noinspection FunctionWithMoreThanThreeNegationsJS, FunctionWithMultipleLoopsJS, OverlyComplexFunctionJS, FunctionNamingConventionJS\r\n/**\r\n * Decode string from BASE64 (or \"base64url\")\r\n * @param {string} input\r\n * @param {boolean} [useUrlTemplate=false] If \"true\" then output would be encoded using \"base64url\"\r\n * @param {boolean} [cutTailZeros=false] If \"true\" then cut tailing zeroz from function result\r\n * @returns {string}\r\n */\r\nexport function fromBase64(input, useUrlTemplate = false, cutTailZeros = false)\r\n{\r\n\t// noinspection ConditionalExpressionJS\r\n\tconst template = (useUrlTemplate) ? base64UrlTemplate : base64Template;\r\n\t\r\n\t//region Aux functions\r\n\t// noinspection FunctionWithMultipleReturnPointsJS, NestedFunctionJS\r\n\tfunction indexof(toSearch)\r\n\t{\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, MagicNumberJS\r\n\t\tfor(let i = 0; i < 64; i++)\r\n\t\t{\r\n\t\t\t// noinspection NonBlockStatementBodyJS\r\n\t\t\tif(template.charAt(i) === toSearch)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t\t\r\n\t\t// noinspection MagicNumberJS\r\n\t\treturn 64;\r\n\t}\r\n\t\r\n\t// noinspection NestedFunctionJS\r\n\tfunction test(incoming)\r\n\t{\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, ConditionalExpressionJS, MagicNumberJS\r\n\t\treturn ((incoming === 64) ? 0x00 : incoming);\r\n\t}\r\n\t//endregion\r\n\t\r\n\tlet i = 0;\r\n\t\r\n\tlet output = \"\";\r\n\t\r\n\twhile(i < input.length)\r\n\t{\r\n\t\t// noinspection NestedFunctionCallJS, LocalVariableNamingConventionJS, IncrementDecrementResultUsedJS\r\n\t\tconst enc1 = indexof(input.charAt(i++));\r\n\t\t// noinspection NestedFunctionCallJS, LocalVariableNamingConventionJS, ConditionalExpressionJS, MagicNumberJS, IncrementDecrementResultUsedJS\r\n\t\tconst enc2 = (i >= input.length) ? 0x00 : indexof(input.charAt(i++));\r\n\t\t// noinspection NestedFunctionCallJS, LocalVariableNamingConventionJS, ConditionalExpressionJS, MagicNumberJS, IncrementDecrementResultUsedJS\r\n\t\tconst enc3 = (i >= input.length) ? 0x00 : indexof(input.charAt(i++));\r\n\t\t// noinspection NestedFunctionCallJS, LocalVariableNamingConventionJS, ConditionalExpressionJS, MagicNumberJS, IncrementDecrementResultUsedJS\r\n\t\tconst enc4 = (i >= input.length) ? 0x00 : indexof(input.charAt(i++));\r\n\t\t\r\n\t\t// noinspection LocalVariableNamingConventionJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst chr1 = (test(enc1) << 2) | (test(enc2) >> 4);\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst chr2 = ((test(enc2) & 0x0F) << 4) | (test(enc3) >> 2);\r\n\t\t// noinspection LocalVariableNamingConventionJS, MagicNumberJS, NonShortCircuitBooleanExpressionJS\r\n\t\tconst chr3 = ((test(enc3) & 0x03) << 6) | test(enc4);\r\n\t\t\r\n\t\toutput += String.fromCharCode(chr1);\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS, MagicNumberJS\r\n\t\tif(enc3 !== 64)\r\n\t\t\toutput += String.fromCharCode(chr2);\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS, NonBlockStatementBodyJS, MagicNumberJS\r\n\t\tif(enc4 !== 64)\r\n\t\t\toutput += String.fromCharCode(chr3);\r\n\t}\r\n\t\r\n\tif(cutTailZeros)\r\n\t{\r\n\t\tconst outputLength = output.length;\r\n\t\tlet nonZeroStart = (-1);\r\n\t\t\r\n\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\tfor(let i = (outputLength - 1); i >= 0; i--)\r\n\t\t{\r\n\t\t\t// noinspection ConstantOnRightSideOfComparisonJS\r\n\t\t\tif(output.charCodeAt(i) !== 0)\r\n\t\t\t{\r\n\t\t\t\tnonZeroStart = i;\r\n\t\t\t\t// noinspection BreakStatementJS\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// noinspection NonBlockStatementBodyJS, NegatedIfStatementJS\r\n\t\tif(nonZeroStart !== (-1))\r\n\t\t\toutput = output.slice(0, nonZeroStart + 1);\r\n\t\telse\r\n\t\t\toutput = \"\";\r\n\t}\r\n\t\r\n\treturn output;\r\n}\r\n//**************************************************************************************\r\nexport function arrayBufferToString(buffer)\r\n{\r\n\tlet resultString = \"\";\r\n\tconst view = new Uint8Array(buffer);\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(const element of view)\r\n\t\tresultString += String.fromCharCode(element);\r\n\t\r\n\treturn resultString;\r\n}\r\n//**************************************************************************************\r\nexport function stringToArrayBuffer(str)\r\n{\r\n\tconst stringLength = str.length;\r\n\t\r\n\tconst resultBuffer = new ArrayBuffer(stringLength);\r\n\tconst resultView = new Uint8Array(resultBuffer);\r\n\t\r\n\t// noinspection NonBlockStatementBodyJS\r\n\tfor(let i = 0; i < stringLength; i++)\r\n\t\tresultView[i] = str.charCodeAt(i);\r\n\t\r\n\treturn resultBuffer;\r\n}\r\n//**************************************************************************************\r\nconst log2 = Math.log(2);\r\n//**************************************************************************************\r\n// noinspection FunctionNamingConventionJS\r\n/**\r\n * Get nearest to input length power of 2\r\n * @param {number} length Current length of existing array\r\n * @returns {number}\r\n */\r\nexport function nearestPowerOf2(length)\r\n{\r\n\tconst base = (Math.log(length) / log2);\r\n\t\r\n\tconst floor = Math.floor(base);\r\n\tconst round = Math.round(base);\r\n\t\r\n\t// noinspection ConditionalExpressionJS\r\n\treturn ((floor === round) ? floor : round);\r\n}\r\n//**************************************************************************************\r\n/**\r\n * Delete properties by name from specified object\r\n * @param {Object} object Object to delete properties from\r\n * @param {Array.<string>} propsArray Array of properties names\r\n */\r\nexport function clearProps(object, propsArray)\r\n{\r\n\tfor(const prop of propsArray)\r\n\t\tdelete object[prop];\r\n}\r\n//**************************************************************************************\r\n"],"file":"utils.js"}